# 進捗管理画面仕様書

作成日: 2026-01-31

## 目的（サマリー）

プロジェクト全体および担当分類（FE / BE / テスト）ごとの進捗を集計・表示し、計画（理論値）と実績の差分を把握できるようにする。画面は閲覧・確認用途に限定し、数値編集は行わない。

## 成功条件

- インポート済みデータに基づき、全体/FE/BE/テスト別に指標が正しく算出・表示されること。
- TSV インポート／更新で自動再集計され、画面リロードを要しないこと。

## 表示指標（各行：全体/FE/BE/テスト）

- 全ストーリーポイント：対象フィーチャーの `storyPoints` 合計（未定義は除外）
- 完了ポイント：状態が完了に該当するフィーチャーの `storyPoints` 合計
- 予定進捗率：チームベロシティ × 累積稼働日 を基に算出する理論上の進捗（%）
- 実施進捗率：完了ポイント ÷ 全ストーリーポイント × 100（%）
- 誤差ポイント：完了ポイント − 予定消化PT（正=前倒し、負=遅延）

## 集計ルール（前提）

- 集計対象はインポート済みフィーチャーデータのみ。
- `category` を用いて FE/BE/テスト に分類する。
- `storyPoints` が null/undefined の行は集計から除外。
- 状態判定は `statusMappings` に基づく。

## 算出手順（簡潔）

1. チームベロシティ = 対象分類に属する各メンバーのベロシティ合算（pt/日）。`plannedVelocity` は `pt/day` を想定する。
2. 累積稼働日 = 対象イテレーションまでの稼働日合計
3. 予定消化PT = チームベロシティ × 累積稼働日
4. 予定進捗率 = 予定消化PT ÷ 全ストーリーポイント × 100
5. 実施進捗率 = 完了ポイント ÷ 全ストーリーポイント × 100
6. 誤差ポイント = 完了ポイント − 予定消化PT

(注) 目標PT の算出は各メンバーの `plannedVelocity (pt/day)` を用い、必要に応じて稼働日を掛け合わせて算出する（例: 個人目標 = plannedVelocity × 個人の稼働日、チーム目標 = 個人目標の合算）。

（注）予定進捗率は設定値（ベロシティ／イテレーション稼働日）に基づく理論値であり、実績はこの算出に含めない。

## UI 仕様（概要）

- 表形式（行：全体/FE/BE/テスト、列：上記指標）
- 数値は原則整数表示。進捗率は小数第2位まで表示し、表示は切り捨て（truncate）で行う。
- 誤差ポイントは色付き表示を行う。負の値（遅延）は赤（レッド系）で表示し、正の値は緑（グリーン系）で表示する。
- イテレーション切替は画面上部にタブを配置して行う（タブ毎にそのイテレーションの集計を表示）。タブ切替はクライアント内部 state で行い、URL の同期や履歴管理は行わない。

## 挙動

- インポート／データ更新で自動再集計。画面リロード不要。
- 設定（ベロシティ、稼働日など）は `設定画面` が管理し、進捗画面は読み取り専用で参照する。

## 制約・非対応

- 数値の直接編集は不可。
- グラフ表示、イテレーション切替、過去比較は本仕様では非対応。

## 制約・非対応

- 数値の直接編集は不可。
- グラフ表示、過去比較は本仕様では非対応。

（注）イテレーション切替はサポートするが、切替はタブ UI（クライアント内部 state）で行い、URL同期/ルーティングは行わない。

## 受け入れ条件（例）

- AC-001: TSV をインポートすると、`全ストーリーポイント` と `完了ポイント` が正しく集計される。
- AC-002: 設定で定義したベロシティと稼働日を基に `予定進捗率` が算出される。
- AC-003: データ更新後、画面に反映されるまで 1 秒以内。
- AC-004: 進捗率は画面上で小数第2位まで表示され、切り捨てで表示されること（例: 12.349% → 12.34%）。
- AC-005: `誤差ポイント` が負の値の場合、該当セルの表示色が赤であること（色のみで情報を伝えない補助ラベルを併用）。
- AC-006: 画面上部のイテレーションタブで切り替えた際、表示は選択イテレーションの集計に即時切替される（URL 変更なし）。

---
